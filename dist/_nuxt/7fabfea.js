(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{448:function(t,e,r){"use strict";r.r(e);r(42);var n={props:{forum:{type:Object,required:!0},page:{type:Number,required:!1}}},o=r(2),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.forum.redirects?r("a",{staticClass:"name",attrs:{href:t.forum.redirects}},[t._v(t._s(t.forum.name))]):t.page?r("nuxt-link",{staticClass:"name",attrs:{to:{name:"forums-slug",params:{slug:t.forum.slug},query:{page:t.page}}}},[t._v(t._s(t.forum.name))]):r("nuxt-link",{staticClass:"name",attrs:{to:{name:"forums-slug",params:{slug:t.forum.slug}}}},[t._v(t._s(t.forum.name))])}),[],!1,null,null,null);e.default=component.exports},539:function(t,e){},540:function(t,e,r){var content=r(733);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(6).default)("1ca9897f",content,!0,{sourceMap:!1})},541:function(t,e,r){var content=r(735);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(6).default)("d566719a",content,!0,{sourceMap:!1})},732:function(t,e,r){"use strict";r(540)},733:function(t,e,r){(e=r(5)(!1)).push([t.i,"form textarea[data-v-65d1b18a]{height:400px;line-height:20px;padding:10px}.page-section[data-v-65d1b18a]{margin-bottom:20px}",""]),t.exports=e},734:function(t,e,r){"use strict";r(541)},735:function(t,e,r){(e=r(5)(!1)).push([t.i,".form-error{display:inline-block;color:#f0506e;font-size:12px;text-transform:lowercase}.error{border:1px solid #f0506e;border-radius:4px}.error .editor-toolbar{color:#f0506e;border:none}.error .CodeMirror{border:none;border-top:1px solid #f0506e}.editor-toolbar{border-top-left-radius:2px;border-top-right-radius:2px}.CodeMirror{border-bottom-left-radius:2px;border-bottom-right-radius:2px}",""]),t.exports=e},768:function(t,e,r){"use strict";r.r(e);r(21);var n=r(3),o=(r(23),r(110)),l=o.validationMixin,c=(o.default,r(420)),m=c.required,d=c.minLength,f=c.maxLength,h={middleware:"authenticated",mixins:[l],validations:{title:{required:m,minLength:d(3),maxLength:f(60)},details:{required:m,minLength:d(10),maxLength:f(8e3)}},data:function(){return{forum:null,title:"",details:"",error:null}},head:function(){return{title:"New Post ("+this.forum.name+")"}},mounted:function(){var t=this,e=r(535);this.textEditor=new e({autofocus:!0,autosave:{enabled:!0,uniqueId:"NewThread-"+this.forum.slug,delay:5e3},spellChecker:!1,status:!1,renderingConfig:{markedOptions:{sanitize:!0}},element:this.$refs.details}),this.textEditor.codemirror.on("change",(function(){t.details=t.textEditor.value()}))},asyncData:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.$axios,o=t.route,l=o.params.slug,r.next=4,n.get("/forums/"+l+"/").then((function(t){return t.data.hasOwnProperty("can_post")&&t.data.can_post?{forum:t.data.forum}:e.$nuxt.error({statusCode:404,message:"You can't post in that forum!"})})).catch((function(t){console.log(t)}));case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))()},methods:{submitPost:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.error=null,t.$v.$touch(),!t.$v.$invalid){e.next=5;break}return t.error="The form is invalid!",e.abrupt("return");case 5:t.$axios.post("/forums/post",{forum_id:t.forum.id,post_title:t.title,post_details:t.details}).then((function(e){201===e.status&&(t.textEditor.clearAutosavedValue(),t.$router.push({name:"forums-thread-slug",params:{thread:e.data.id,slug:e.data.slug}}))})).catch((function(e){e.response&&(t.error=e.response.data)}));case 6:case"end":return e.stop()}}),e)})))()}}},v=(r(732),r(734),r(2)),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"uk-container"},[r("ul",{staticClass:"uk-breadcrumb uk-margin"},[r("li",[r("nuxt-link",{attrs:{to:{name:"forums"}}},[t._v("Forums")])],1),t._v(" "),t._m(0),t._v(" "),r("li",[r("ForumLink",{attrs:{forum:this.forum}})],1),t._v(" "),t._m(1),t._v(" "),r("li",[r("nuxt-link",{attrs:{to:{name:"forums-slug-new",params:{slug:this.forum.slug}}}},[t._v("New Post")])],1)]),t._v(" "),r("div",{staticClass:"page-section uk-padding uk-margin"},[r("div",{staticClass:"uk-grid uk-flex uk-flex-center"},[r("div",{staticClass:"uk-width-3-4"},[r("span",{staticClass:"page-title"},[t._v("New Post")]),t._v(" "),null!=t.forum?r("form",[r("div",[t._m(2),t._v(" "),t.$v.title.minLength?t._e():r("div",{staticClass:"form-error"},[t._v("The title must have at least "+t._s(t.$v.title.$params.minLength.min)+" characters!")]),t._v(" "),t.$v.title.maxLength?t._e():r("div",{staticClass:"form-error"},[t._v("The title can't have more than "+t._s(t.$v.title.$params.maxLength.max)+" characters!")]),t._v(" "),r("div",{staticClass:"uk-form-controls"},[r("div",{staticClass:"uk-inline uk-width-1-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"uk-input",class:{"uk-form-danger":!t.$v.title.minLength||!t.$v.title.maxLength},attrs:{id:"title",name:"title",placeholder:"The title of your post...",type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"uk-margin"},[t._m(3),t._v(" "),t.$v.details.minLength?t._e():r("div",{staticClass:"form-error"},[t._v("Your post must have at least "+t._s(t.$v.details.$params.minLength.min)+" characters!")]),t._v(" "),t.$v.details.maxLength?t._e():r("div",{staticClass:"form-error"},[t._v("Your post can't have more than "+t._s(t.$v.details.$params.maxLength.max)+" characters!")]),t._v(" "),r("div",{staticClass:"uk-form-controls"},[r("div",{staticClass:"uk-inline uk-width-1-1",class:{error:!t.$v.details.minLength||!t.$v.details.maxLength}},[r("textarea",{ref:"details",staticClass:"uk-input",class:{"uk-form-danger":!t.$v.details.minLength||!t.$v.details.maxLength},attrs:{id:"details",name:"details",placeholder:"The details of your post...",type:"text"}})])])]),t._v(" "),r("button",{staticClass:"uk-button uk-btn-green uk-margin",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.submitPost()}}},[t._v("Create Post")])]):t._e()])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"divider"},[e("i",{staticClass:"fas fa-chevron-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"divider"},[e("i",{staticClass:"fas fa-chevron-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"uk-form-label",attrs:{for:"title"}},[this._v("\n\t\t\t\t\t\t\tThe title of your post "),e("span",{staticClass:"uk-text-meta"},[this._v("(required)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"uk-form-label",attrs:{for:"details"}},[this._v("\n\t\t\t\t\t\t\tThe details of your post "),e("span",{staticClass:"uk-text-meta"},[this._v("(required)")])])}],!1,null,"65d1b18a",null);e.default=component.exports;installComponents(component,{ForumLink:r(448).default})}}]);